---
handle: cart_paypal_return
position: 3
listed: false
is_layout: false
---

{% action 'update cart' %}
  {% include 'store_functions' %}
  //<script>
  try {
    if(params.hasOwnProperty('paymentId')) {
      var cart = store.update_cart({
        payment_params: {
          paypal: {
            action: 'execute',
            payment_id: params.paymentId,
            payer_id: params.PayerID
          }
        }
      });
      redirectTo('cart_end');
    }
    else {
      redirectTo('cart_checkout');
    }
  }
  catch(error) {
    store.logError(error);
  }
{% endaction %}
{{params}}
